<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <script src="js/flexible.js"></script><style>@charset "utf-8";html{color:#000;background:#fff;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}html *{outline:0;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}html,body{font-family:sans-serif}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{margin:0;padding:0}input,select,textarea{font-size:100%}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}abbr,acronym{border:0;font-variant:normal}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:500}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:500}q:before,q:after{content:''}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a:hover{text-decoration:underline}ins,a{text-decoration:none}</style>
  <title>七夕领好礼</title>
  <link rel="stylesheet" href="css/game.css">
</head>
<body style="font-size: 12px;">
  <div class="lan-mark">请竖屏浏览</div>
  <div id="wrapper">
    <div id="page_bd">
      <div class="lucky_nine_main" id="lucky_nine_main">
        <div id="lucky_nine_hd">
          <a href="https://dingxl.com" class="back noTapColor"></a>
          <span class="share noTapColor"></span>
        </div>
        <div id="lucky_nine_title"></div>
        <div class="rule-wrapper">
          <span class="rule rule-btn noTapColor">活动规则</span>
        </div>
        <div class="prize-list-wrapper">
          <div class="prize-content">
            <div class="prize-padding"></div>
            <div class="prize-bg">
            <ul class="prize-ul">
              <li class="prize-1 prize-li">
                <div class="prize-li-bg" style="background-image: url(imgs/50da81cb39dbb6fdacdc05770124ab18962b37d8.jpg);">
                  <div class="prize-border"></div>
                  <span>糯米电影券</span>
                </div>
              </li>
              <li class="prize-2 prize-li">
                <div class="prize-li-bg" style="background-image: url(imgs/38dbb6fd5266d0160cc17b7e9f2bd40734fa358f.jpg);">
                  <div class="prize-border"></div>
                  <span>0元领牛奶</span>
                </div>
              </li>
              <li class="prize-3 prize-li">
                <div class="prize-li-bg" style="background-image: url(imgs/472309f79052982217d9dd95dfca7bcb0b46d4fa.jpg);">
                  <div class="prize-border"></div>
                  <span>携程酒店券</span>
                </div>
              </li>
              <li class="prize-4 prize-li">
                <div class="prize-li-bg" style="background-image: url(imgs/10dfa9ec8a13632730e02665998fa0ec08fac753.jpg);">
                  <div class="prize-border"></div>
                  <span>小狗吸尘器</span>
                </div>
              </li>
              <li class="prize-5 prize-li">
                <div class="prize-li-bg" style="background-image: url(imgs/8644ebf81a4c510fac28074c6859252dd52aa5fc.jpg);">
                  <div class="prize-border"></div>
                  <span>嗨厨房优惠券</span>
                </div>
              </li>
              <li class="prize-6 prize-li no-prize">
                <div class="prize-li-bg" style="background-image: url(imgs/a8ec8a13632762d0a4e840e9a8ec08fa503dc696.jpg);">
                  <div class="prize-border"></div>
                  <span>好遗憾</span>
                </div>
              </li>
              <li class="prize-7 prize-li">
                <div class="prize-li-bg" style="background-image: url(imgs/7e3e6709c93d70cfdc2c4f5bf0dcd100bba12b96.jpg);">
                  <div class="prize-border"></div>
                  <span>糯米七夕礼包</span>
                </div>
              </li>
              <li class="prize-8 prize-li">
                <div class="prize-li-bg" style="background-image: url(imgs/09fa513d269759ee6779849dbafb43166d22dfbf.jpg);">
                  <div class="prize-border"></div>
                  <span>华为V8手机</span>
                </div>
              </li>
              <li class="prize-btn noTapColor"></li>
            </ul>
          </div>
          <p class="prize-count">
            您今天还有<span class="prize-times">3</span>次抽奖机会
          </p>
          </div>
        </div>
        <div class="bottom-wrapper">
          <div class="roll-lamp-wrapper">
            <marquee scrollamount="4">
              <ul>
                <li>恭喜用户185*****261获得了糯米电影折扣券一张</li>
                <li>恭喜用户啊呜啊呜啊呜6获得了嗨厨房优惠券一张</li>
                <li>恭喜用户疯癫道人在红尘获得了嗨厨房优惠券一张</li>
                <li>恭喜用户圣天清风获得了糯米餐饮优惠券一张</li>
                <li>恭喜用户132*****138获得了1号店0元领牛奶</li>
                <li>恭喜用户小杰叔叔丶获得了糯米电影折扣券一张</li>
                <li>恭喜用户157*****045获得了糯米新用户鲜花券一张</li>
                <li>恭喜用户yanmubandu890获得了糯米电影折扣券一张</li>
                <li>恭喜用户一个聪明者获得了糯米电影折扣券一张</li>
                <li>恭喜用户150*****971获得了1号店0元领牛奶</li>
                <li>恭喜用户都还好吧ht获得了糯米餐饮优惠券一张</li>
              </ul>
            </marquee>
          </div>
          <a href="javascript:;" class="viewPrize noTapColor" data-stats="10|2|mid_luck_4015|a1_b4">查看奖品</a>
        </div>
      </div>
      <div class="dialog-mask" style="display:none;"></div>
    </div>
  </div>

  <div id="dialog56366" style="margin-top:0; display:none;" class="dialog dialog-login">
    <div class="dialog-close noTopColor"></div>
    <div class="dialog-title">亲，登录才能进行分享哦！</div>
    <a href="#" class="dialog-l-btn">去登录</a>
  </div>
  <div id="dialog12530" class="dialog dialog-rule" style="margin-top: 0px; display: none;">
    <div class="dialog-close noTapColor"></div>
    <div class="dialog-title">抽奖规则</div>
    <div class="dialog-rule-content">
      <ul>
        <li>活动时间：2016年8月6日0:00-2016年8月9日23:59。本活动仅限百度首页登录用户参与。</li>
        <li>活动期间，每个登录用户每天有3次抽奖机会，当天抽奖次数如未用尽，不可累计至后续活动。</li>
        <li>所获得的奖品可点击百度首页右上角进入“个人中心-我的奖品”查看，所有优惠券不找零、不兑现，详细使用规则参见奖品详情页内的“使用说明”。为了确保实物奖品的准确发放，请相关获奖用户填写详细收货信息，超过15个工作日未填写详细收货信息视作自动放弃奖品。</li>
        <li>对于恶意注册、利用本次活动奖品进行非法牟利、炒作、套现、转售的用户，一经发现并核实用户存在上述行为，百度首页有权取消其获奖资格，追回奖品。如上述违规行为给百度首页造成损失，百度首页将保留追究其民事责任和刑事责任的权利。</li>
        <li>如对本活动有其他疑问，请搜索并关注“百度首页”或“baiduzhinengshouye”微信公众号，描述详细问题，将有专人进行解答。</li>
      </ul>
    </div>
  </div>
  <div id="bd_share_popup_1470636297006" class="bdSharePopup" style="display:none">
    <div class="bd-share-popup-layer" id="bd_share_popup_layer" style="height:1168px;"></div>
    <div class="bd-share-pop-content native" id="bd_share_popup_content_1470636695312" style="height:668px;">
      <table>
        <tbody>
          <tr>
            <td>
              <div class="bd-share-popup" id="bd_share_popup" style="width:100%;">
                <div class="bd-share">
                  <ul class="bd-cl" id="bd_share_mediaes" style="width:320px;">
                    <li class="media">
                      <a href="#" class="qqdenglu" id="bd_share_mediaes_qqdenglu">QQ空间</a>
                    </li>
                    <li class="media">
                      <a href="#" class="sinaweibo" id="bd_share_mediaes_sinaweibo">新浪微博</a>
                    </li>
                    <li class="media">
                      <a href="#" class="qqweibo" id="bd_share_mediaes_qqweibo">腾讯微博</a>
                    </li>
                    <li class="media">
                      <a href="#" class="renren" id="bd_share_mediaes_renren">人人网</a>
                    </li>
                    <li class="media">
                      <a href="#" class="kaixin" id="bd_share_mediaes_kaixin">开心网</a>
                    </li>
                    <li class="media">
                      <a href="#" class="mail" id="bd_share_mediaes_mail">邮件</a>
                    </li>
                  </ul>
                </div>
                <div class="bd-share-popup-footer">
                  <a href="javascript:;" class="bd-share-popup-close" id="bd_share_popup_close_1470636695312">取消</a>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div id="dialog43486" class="dialog dialog-prize" style="display:none; margin-top: -118px">
    <div class="dialog-imgBg" style="display:block">
      <img src="imgs/dcc451da81cb39db3ad0145dd8160924ab1830ac.jpg" alt="">
    </div>
    <div class="dialog-close noTapColor"></div>
    <div class="dialog-up-text">浪漫七夕送上大礼一份</div>
    <div class="dialog-prize-name">糯米电影折扣券一张</div>
    <div class="dialog-down-text">奖品已存放入您的账户,可进入个人中心我的奖品查看详情</div>
    <div class="dialog-btn-wrapper">
      <a href="javascript:;" class="dialog-l-btn">查看奖品</a>
      <a href="javascript:;" class="dialog-r-btn">分享好友</a>
    </div>
  </div>
<script src="js/jquery.min.js"></script>
<script>
  var shareClose = document.querySelector('.bd-share-popup-close'),
      sharePopup = document.querySelector('.bdSharePopup'),
          oClose = document.querySelector('.dialog-close'),
            mask = document.querySelector('.dialog-mask'),
          oShare = document.querySelector('.share'),
     dialogPrize = document.getElementById('dialog43486'),
       oStartBtn = document.querySelector(".prize-btn"),
        prizeArr = document.querySelectorAll(".prize-li"),
        rule = document.querySelector('.rule-btn'),
       isRunning = false,
          prizes = [],
          chance = 3,
            flag = 0,
      prizeCount = document.querySelector('.prize-times'),
       prizeName = document.querySelector('.dialog-prize-name');

      init();

      function init(){
        var val = 3;
        if(parseInt(localStorage.chance) >=0) {
          val = parseInt(localStorage.chance);
        }
        chance = val;
        prizeCount.innerHTML = val;
      }


//随机抽奖
  function getPrizeRandom() {
    var num1 = Math.round(Math.random()*1000);
    var num2 = Math.round(Math.random()*1000);
    var num3 = Math.round(Math.random()*1000);
    var prize = 5;
    if(num1>900 && num2>900 && num3>900) {
      prize = 7;
    } else if (num1>300) {
     prize = 1;
    } else if (num1>350) {
     prize = 0;
    } else if (num1>800 && num2>800 && num3>800) {
      prize = 3;
    } else if (num1>700 && num2>700 && num3>500) {
      prize = 6;
    } else if (num1>400 && num2>400) {
      prize = 4;
    } else if (num1>350 && num2>350) {
      prize = 2;
    }
    return prize;
  }



  // 分享关闭
  shareClose.addEventListener('click',function() {
    sharePopup.style.display = 'none';
  },false);

  $('.dialog-close').click(function() {
    $('#dialog43486').hide();
  });

  //关闭弹层
  oClose.addEventListener('click',function() {
    mask.style.display = 'none';
    $('.dialog').css('marginTop','0');
    $('.dialog').fadeOut();
  },false);

 // 分享按钮
  oShare.addEventListener('click',function() {
    mask.style.display = 'block';
    $('#dialog56366').show();
    $(function() {
       $('#dialog56366').animate({marginTop:'-70.5px'},0);
     })
  },false);

//抽奖规则
  rule.addEventListener('click',function() {
    mask.style.display = 'block';
    $('#dialog12530').show();
    $(function() {
       $('#dialog12530').animate({marginTop:'-150px'},0);
     })
  },false);
    $('.dialog-close').click(function() {
    $('#dialog12530').hide();
    mask.style.display = 'none';
  });

//开始抽奖
  oStartBtn.addEventListener("click",function(){

    var val = localStorage.chance;
    console.log(val);

    if(isRunning) {
      return;
    }

    if(prizes.length>2 || val ==0) {
      alert('您今天的抽奖次数已用完');
      return;
    }
    isRunning = true;
    var i = 0;

    var prize = getPrizeRandom();

    console.log(prize);
    prizes.push(prize);
    console.log(prizes);
    chance--;

    setPrizeText(prize);



    var ring = 0;

    var timer = setInterval(function(){
      var cur = document.querySelector(".prize_cur");
      if(cur){
        cur.classList.remove("prize_cur");
      }

      prizeArr[i].classList.add("prize_cur");
      if(ring >5 && i == prize) {
        clearInterval(timer);
        prizeCount.innerHTML = chance;
        isRunning = false;
        localStorage.setItem('chance',chance);
        $('#dialog43486').show();
        setTimeout(function(){
          document.getElementById('dialog43486').style.marginTop = '-120px';
        },50);
      }
      i++;
      if(i == prizeArr.length){
        i = 0;
        ring++;
      }
    },100)
  },false);

//中奖信息
  function setPrizeText(prize) {
    switch (prize) {
      case 0:
        prizeName.innerHTML = '糯米电影券';
        break;
      case 1:
        prizeName.innerHTML = '0元领牛奶';
        break;
      case 2:
        prizeName.innerHTML = '携程酒店券';
        break;
      case 3:
        prizeName.innerHTML = '小狗吸尘器';
        break;
      case 4:
        prizeName.innerHTML = '嗨厨房优惠券';
        break;
      case 5:
        prizeName.innerHTML = '很遗憾，你没有中奖';
        break;
      case 6:
        prizeName.innerHTML = '糯米七夕礼包';
        break;
      case 7:
        prizeName.innerHTML = '华为V8手机';
        break;
    }
  }

</script>

</body>
</html>
